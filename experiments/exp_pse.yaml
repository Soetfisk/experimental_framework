elements:

 - className: EmptyState
   name: start
   timeout: 1.0

 - className: ScreenText
   name: IntroScreen
   plain_text: PilotData/introPilot.txt
   config_yaml: PilotData/introScreen.yaml

 - module: DataForm
   className: ConsentForm
   name: consentForm
   config_yaml: PilotData/consentForm.yaml

 - className: ScreenText
   name: colourBlindText
   plain_text: PilotData/colourBlindText.txt
   keys:
    - key: escape
      callback: sendMessage
      args: [auto]

 - module: FullScreenImage
   className: ImageQuery
   name: colourBlindCheck
   imageNameStr: PilotData/colorblind/plate%d.png
#   imageStrArgs: [1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17]
   imageStrArgs: [1,2,3]
#   imageAnswers: [12,8,6,29,57,5,3,15,74,2,6,97,45,5,7,16,73]
   imageAnswers: [12,8,6]
   images: exp range(1,39)
   scale: [0.5,0.5]
   keys:
    - key: n
      callback: nextImage
      once: false

 - className: ScreenText
   name: colourBlindProblem
   plain_text: PilotData/colourBlindProblem.txt

 - module: Pilot
   className: ScreenAdjustment
   name: rescaleScreen
   modelName: "PilotData/models/plane"
   texture: "PilotData/textures/soldierRed_100.png"
   config_yaml: PilotData/screenAdjust.yaml
   # distance of the parachute from camera
   parDistCam: 250.0
   readFromGlobals: {
    rescaleFactor: 1.0
   }
   keys:
    - key: escape
      callback: sendMessage
      args: ['auto']
      once: true

 - className: ScreenText
   name: gameIntroText
   plain_text: PilotData/gameIntroText.txt
   keys:
    - key: n
      callback: sendMessage
      args: ['auto']

 - className: Game
   name: thegame
   config_yaml: PilotData/gameConfig.yaml
   saveReplay: PilotData/run/replayLogA.txt,w
   logFile: PilotData/run/gameLogA.txt,a
   parDistCam: 250.0
   keys:
    - key: escape
      callback: sendMessage
      args: ['auto']
#    - key: j
#      callback: moveGround
#      args: [0, -1]
#    - key: l
#      callback: moveGround
#      args: [0, 1]
#    - key: i
#      callback: moveGround
#      args: [1, 1]
#    - key: k
#      callback: moveGround
#      args: [1, -1]
#    - key: w
#      callback: moveGround
#      args: [2, 1]
#    - key: s
#      callback: moveGround
#      args: [2,-1]
#    - key: u
#      callback: rotate
#      args: -1
#    - key: o
#      callback: rotate
#      args: 1

 - className: EmptyState
   name: end

 - className: DataForm
   name: UserInfo
   config_json: PilotData/pilotDataForm.yaml

 - className: HUDText
   name: Timer
   text: "0.0"
   topLeft: [10, 10]

 - module: ScreenText
   className: ScreenText
   name: PrePilotScreen
   plain_text: PilotData/prePilot.txt
   keys:
    - key: escape
      callback: sendMessage
      args: ['auto']

 - className: Pilot
   name: Pilot
   pilotLog: run/pilotLog.txt,a
   config_yaml: PilotData/pilotConfig.yaml
   s_saveReplay: PilotData/run/replayLogA.txt,w
   s_logFile: PilotData/run/pilot.txt,a
   parDistCam: 250.0

 - module: DataForm
   className: DataForm
   name: PilotQuestionnaire
   config_json: PilotData/pilotQuestionnaire.yaml

 - module: ScreenText
   className: ScreenText
   name: FinalScreen
   plain_text: PilotData/finalText.txt

transitions:
# INTRO
 #- trans: 'start @ IntroScreen:auto'
 - trans: 'start @ thegame:auto'
 - trans: 'IntroScreen @ consentForm:auto'
 # CONSENT
 - trans: 'consentForm @ UserInfo:consentYes'
 - trans: 'consentForm @ end:consentNo'
 # USER INFO
 - trans: 'UserInfo @ colourBlindText:auto'
 # COLOUR BLIND
 - trans: 'colourBlindText @ colourBlindCheck:auto'
 - trans: 'colourBlindCheck @ colourBlindProblem:imageQueryBad'
 - trans: 'colourBlindCheck @ rescaleScreen:imageQueryOk'
 - trans: 'colourBlindProblem @ end:auto'
 # RESCALE SCREEN
 - trans: 'rescaleScreen @ gameIntroText:auto'
 # GAME
 - trans: 'gameIntroText @ thegame:auto'
 # GAME QUESTIONNAIRE
 # PILOT
 - trans: 'thegame @ PrePilotScreen:auto'
 - trans: 'PrePilotScreen @ Pilot:auto'
 - trans: 'Pilot @ PilotQuestionnaire: auto'
 # UPLOAD RESULTS
 - trans: 'PilotQuestionnaire @ ResultsUploader: auto'
 - trans: 'ResultsUploader @ FinalScreen: auto'
 # THE END
 - trans: 'FinalScreen @ end:auto'
